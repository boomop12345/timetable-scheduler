<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Role Based Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-800 via-slate-900 to-black">

  <div class="w-96 rounded-2xl bg-slate-900 shadow-xl">
    <form id="loginForm" class="flex flex-col gap-6 p-8">
      <h2 class="text-2xl font-bold text-white text-center">Sign In</h2>

      <!-- Role Selection -->
      <div class="flex justify-center bg-slate-800 rounded-lg p-1">
        <!-- <label class="flex-1">
          <input type="radio" name="role" value="student" class="peer hidden" checked>
          <span class="block cursor-pointer rounded-md py-2 text-center text-sm font-semibold text-slate-400 peer-checked:bg-gray-700 peer-checked:text-white transition">Student</span>
        </label> -->
        <label class="flex-1">
          <input type="radio" name="role" value="teacher" class="peer hidden">
          <span class="block cursor-pointer rounded-md py-2 text-center text-sm font-semibold text-slate-400 peer-checked:bg-gray-700 peer-checked:text-white transition">Teacher</span>
        </label>
        <label class="flex-1">
          <input type="radio" name="role" value="admin" class="peer hidden">
          <span class="block cursor-pointer rounded-md py-2 text-center text-sm font-semibold text-slate-400 peer-checked:bg-gray-700 peer-checked:text-white transition">Admin</span>
        </label>
      </div>

      <!-- Email -->
      <input type="email" placeholder="Email"
        class="bg-slate-900 w-full rounded-lg border border-gray-300 px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-700 focus:ring-offset-2 focus:ring-offset-gray-800" required />

      <!-- Password -->
      <input type="password" placeholder="Password"
        class="bg-slate-900 w-full rounded-lg border border-gray-300 px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-700 focus:ring-offset-2 focus:ring-offset-gray-800" required />

      <!-- Remember Me -->
      <!-- <label class="flex cursor-pointer items-center justify-between text-slate-400">
        Remember Me
        <div class="relative inline-block">
          <input type="checkbox"
            class="peer h-6 w-12 cursor-pointer appearance-none rounded-full border border-gray-300 bg-gray-400 checked:border-green-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-900 focus-visible:ring-offset-2" />
          <span class="pointer-events-none absolute left-1 top-1 block h-4 w-4 rounded-full bg-slate-600 transition-all duration-200 peer-checked:left-7 peer-checked:bg-green-300"></span>
        </div>
      </label> -->

      <!-- Forgot password -->
      <!-- <a href="#" class="text-sm text-slate-400 hover:text-white text-right">Forgot Password?</a> -->

      <!-- Login Button -->
      <button type="submit"
        class="inline-block cursor-pointer rounded-md bg-gray-700 px-4 py-3.5 text-center text-sm font-semibold uppercase text-white transition duration-200 ease-in-out hover:bg-gray-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-700 focus-visible:ring-offset-2 active:scale-95">
        Login
      </button>

      <!-- Divider -->
      <div class="flex items-center justify-center gap-2">
        <span class="h-px w-16 bg-gray-700"></span>
        <!-- <span class="text-gray-400 text-sm">OR</span> -->
        <span class="h-px w-16 bg-gray-700"></span>
      </div>

      <!-- Signup -->
      <!-- <p class="text-center text-slate-400 text-sm">
        Don't have an account?
        <a href="#" class="text-white font-semibold hover:underline">Sign Up</a>
      </p> -->
    </form>
  </div>

  <script>document.getElementById('loginForm').addEventListener('submit', async function(e) {
  e.preventDefault();

  const email = this.querySelector('input[type="email"]').value;
  const password = this.querySelector('input[type="password"]').value;

  try {
    const response = await fetch('http://localhost:5000/api/login', { // Change URL if needed
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, password })
    });

    if (!response.ok) {
      const errorData = await response.json();
      alert(errorData.message ?? 'Login failed');
      return;
    }

    const { role } = await response.json();

    if (role === 'teacher') {
      window.location.href = '/abhishekdalla.html'; // teacher page URL
    } else if (role === 'admin') {
      window.location.href = '/admin-dashboard.html'; // admin page URL
    } else {
      window.location.href = '/student-dashboard.html'; // student page URL
    }
  } catch (error) {
    alert('Server error or network issue');
  }
});
  </script>

</body>
</html>
